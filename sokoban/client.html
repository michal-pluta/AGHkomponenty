<!doctype html>
<html>
	<head>
		<meta charset=utf-8 />

		  <title>S≈çkoban: Microban levels</title>
		  
		  <link rel="stylesheet" media="screen" href="css/screen.css">
		  <link rel="stylesheet" media="screen" href="css/sokoban.css">

		  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		  <script src="js/jquery.processEach.js"></script>
		  <script src="js/jquery.sokoban.js"></script>
		  <script>
		    jQuery(function(){ 

		      var levels = $( 'pre.sokoban.level' );
		      
		      levels
		        .processEach(function(){
		          $( this ).sokoban();
		        })
		        .bind( 'keydown', function (e) {
		          if ( e.keyCode == 9 ) { // tab
		            var i = (levels.length + ( levels.index( this ) + (e.shiftKey ? -1 : 1) ) ) % levels.length;
		            var o = levels.eq( i ).find( '.soko-room:first' ).focus();
		            $( window ).scrollTop( levels.eq( i ).offset().top );
		          }
		        })
		        .eq( 0 )
		          .find( '.soko-room:first' )
		          .focus()
		          ;

		    });
		  </script>
	    <script>
	    var startGame = function () {
            var age = document.getElementById('input-age').value;
            if(age > 99) {
                age = 99;
            } else if (age < 0) {
                age = 1;
            } else {
                age = Math.floor(age);
            }
            if(age < 10) {
                document.getElementById('el1').style.display = "block"
            } else if (age < 16) {
                document.getElementById('ml1').style.display = "block"
            } else {
                document.getElementById('hl1').style.display = "block"
            }
            document.getElementById('start-button').disabled = true;
            document.getElementById('input-age').disabled = true;
		};
	    </script>
	</head>
	<body>
		<div style="width: 512px; margin: auto">
			<h2 style="text-align: center">Sokoban</h2>
			<div style="margin-bottom: 12px">After starting game click on game and use arrow keys to push boxes and put them on marked places with dots.</div>
			<div style="margin-bottom: 12px">
				<label><b>Age: </b></label>
				<input id="input-age" type="number" min="1" max="99">
				<button id="start-button" onClick="startGame()">Start game!</button>
			</div>
			<div style="display: flex; justify-content: center;" id="levels">
				<pre id="el1" style="display: none" class="sokoban level">
				####
				# .#
				#  ###
				#*@  #
				#  $ #
				#  ###
				####
				</pre>
				<pre id="ml1" style="display: none" class="sokoban level">
				 #######
				 #     #
				 # .$. #
				## $@$ #
				#  .$. #
				#      #
				########
				</pre>
				<pre id="hl1" style="display: none" class="sokoban level">
				  ####
				###  ####
				#     $ #
				# #  #$ #
				# . .#@ #
				#########
				</pre>
			</div>
		</div>
	</body>
</html>